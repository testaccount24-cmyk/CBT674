PROC 0 PROFDSN
/*                                                                  */
/* THIS EXEC ALLOCATES THE ISPF PROFILE AND ADD IT TO ISPTABL LIB   */
/*                                                                  */
IF &PROFDSN = &STR() THEN +
  SET &PROFDSN = &STR('&SYSUID..ISPF.ISPPROF')

CONTROL NOMSG NOFLUSH
FREE  FI(ISPPROF)
ALLOC FI(ISPPROF) SHR DA(&PROFDSN.)
IF &LASTCC Â¬= 0 THEN DO
  FREE FI(ISPCRTE)
  CONTROL MSG
  ATTRIB ISPCRTE DSORG(PO) RECFM(F B) LRECL(80) BLKSIZE(6160)
  ALLOC FI(ISPPROF) DA(&PROFDSN.) SP(5,1) CYLINDERS DIR(20) +
    USING(ISPCRTE)
  IF &LASTCC = 0 THEN +
    WRITE *** ISPF PROFILE DATA SET &PROFDSN. HAS BEEN CREATED
  ELSE DO
    WRITE  *** UNABLE TO ALLOCATE ISPF PROFILE DATA SET &PROFDSN.
    FREE FI(ISPCRTE)
    EXIT CODE(12)
   END
  FREE FI(ISPCRTE)
END
CONTROL MSG FLUSH

CONTROL NOMSG
FREE  FI(ISPTABL)
CONTROL MSG
ALLOC FI(ISPTABL) SHR DA(&PROFDSN.)
